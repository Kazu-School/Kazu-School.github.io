<html>
<table id="table" border="1">
<tr><td> 年号 </td><td>出来事、キーワード</td><td>マーク</td></tr>
</table>
<div id="div"></div>
<script>
function start(){
data={593: '聖徳太子が摂政になる', 607: '小野妹子が随に送られる', 630: '第一回遣唐使', 645: '大化の改新', 663: '白村江の戦い', 672: '壬申の乱', 701: '大宝律令', 710: '平城京', 743: '墾田永年私財法', 784: '長岡京', 794: '平安京', 802: '坂上田村麻呂が胆沢城を作る', 866: '藤原良房が摂政になる', 887: '藤原基経が関白になる', 894: '遣唐使の停止', 935: '平将門の乱', 939: '藤原純友の乱', 1016: '藤原道長が摂政になる', 1069: '後三条天皇が荘園管理を始める', 1086: '白河上皇が院政を始める', 1156: '保元の乱', 1159: '平治の乱', 1167: '平清盛が太政大臣', 1185: '源頼朝が守護、地頭を設置する平氏が滅びる', 1192: '源頼朝が征夷大将軍になる', 1221: '承久の乱', 1232: '御成敗式目', 1274: '文永の役', 1281: '弘安の役', 1333: '鎌倉幕府が滅びる 建武の新政', 1336: '南北朝に分かれ対立する', 1338: '足利尊氏が征夷大将軍になる', 1378: '足利義満が幕府を室町に移す', 1392: '南北朝が統一される', 1404: '勘合貿易', 1467: '応仁の乱', 1543: 'ポルトガル人が鉄砲を伝える', 1549: 'ザビエルがキリスト教を伝える', 1573: '室町幕府が滅びる', 1582: '天正遣欧少年使節が出発する', 1590: '豊臣秀吉が全国統一する', 1592: '豊臣秀吉が朝鮮侵略を始める', 1600: '関ケ原の戦い', 1603: '徳川家康が征夷大将軍になる', 1612: '幕領でのキリスト教禁止', 1615: '豊臣氏が滅ぶ 武家諸法度 禁中並公家諸法度', 1635: '参勤 交代', 1637: '島原天草一揆'};
for (i=0; i < Object.keys(data).length; i++){
table=document.getElementById("table");
row = table.insertRow( -1 );
row.id=Object.keys(data)[i]+"";
td= row.insertCell( -1 );
td1= row.insertCell(-1);
td2= row.insertCell(-1);
check = document.createElement("input");
check.type="checkbox";
check.setAttribute("onchange","check("+Object.keys(data)[0]+")")
td2.appendChild(check);
td.textContent=Object.keys(data)[i]+"";
};
button=document.createElement("button");
button.setAttribute("onclick","fbutton();");
button.id="button";
button.textContent="Next ->";
document.getElementById(Object.keys(data)[0]+"").cells[1].appendChild(button);
now =0;
};

function restart(){
rawdata={593: '聖徳太子が摂政になる', 607: '小野妹子が随に送られる', 630: '第一回遣唐使', 645: '大化の改新', 663: '白村江の戦い', 672: '壬申の乱', 701: '大宝律令', 710: '平城京', 743: '墾田永年私財法', 784: '長岡京', 794: '平安京', 802: '坂上田村麻呂が胆沢城を作る', 866: '藤原良房が摂政になる', 887: '藤原基経が関白になる', 894: '遣唐使の停止', 935: '平将門の乱', 939: '藤原純友の乱', 1016: '藤原道長が摂政になる', 1069: '後三条天皇が荘園管理を始める', 1086: '白河上皇が院政を始める', 1156: '保元の乱', 1159: '平治の乱', 1167: '平清盛が太政大臣', 1185: '源頼朝が守護、地頭を設置する平氏が滅びる', 1192: '源頼朝が征夷大将軍になる', 1221: '承久の乱', 1232: '御成敗式目', 1274: '文永の役', 1281: '弘安の役', 1333: '鎌倉幕府が滅びる 建武の新政', 1336: '南北朝に分かれ対立する', 1338: '足利尊氏が征夷大将軍になる', 1378: '足利義満が幕府を室町に移す', 1392: '南北朝が統一される', 1404: '勘合貿易', 1467: '応仁の乱', 1543: 'ポルトガル人が鉄砲を伝える', 1549: 'ザビエルがキリスト教を伝える', 1573: '室町幕府が滅びる', 1582: '天正遣欧少年使節が出発する', 1590: '豊臣秀吉が全国統一する', 1592: '豊臣秀吉が朝鮮侵略を始める', 1600: '関ケ原の戦い', 1603: '徳川家康が征夷大将軍になる', 1612: '幕領でのキリスト教禁止', 1615: '豊臣氏が滅ぶ 武家諸法度 禁中並公家諸法度', 1635: '参勤交代', 1637: '島原天草一揆'};
data={}
for (i=0; i < table.rows.length-1; i++){
if (table.rows[i+1].cells[2].getElementsByTagName("input")[0].checked){
data[Number(table.rows[i+1].cells[0].textContent)]=rawdata[Number(table.rows[i+1].cells[0].textContent)]
};
};
while (table.rows.length > 0) table.deleteRow(0);
tr=document.createElement("tr");
td=document.createElement("td");
td.textContent="年号";
td2=document.createElement("td");
td2.textContent="出来事、キーワード";
td3=document.createElement("td");
td3.textContent="マーク"
tr.appendChild(td);
tr.appendChild(td2);
tr.appendChild(td3);
table.appendChild(tr);
for (i=0; i < Object.keys(data).length; i++){
table=document.getElementById("table");
row = table.insertRow( -1 );
row.id=Object.keys(data)[i]+"";
td= row.insertCell( -1 );
td1= row.insertCell(-1);
td2= row.insertCell(-1);
check = document.createElement("input");
check.type="checkbox";
td2.appendChild(check);
td.textContent=Object.keys(data)[i]+"";
};
button=document.createElement("button");
button.setAttribute("onclick","fbutton();");
button.id="button";
button.textContent="Next ->";
document.getElementById(Object.keys(data)[0]+"").cells[1].appendChild(button);
now =0;
};

function fbutton(){
next=now+1;
if (next < Object.keys(data).length){
document.getElementById(Object.keys(data)[next]+"").cells[1].appendChild(button);
document.getElementById(Object.keys(data)[now]+"").cells[1].textContent=data[Object.keys(data)[now]];
now=next;
} else {
document.getElementById(Object.keys(data)[now]+"").cells[1].textContent=data[Object.keys(data)[now]];
button.remove();
button1=document.createElement("button");
button1.textContent="チェックを付けたものだけ確認する";
button1.setAttribute("onclick","restart();");
button2=document.createElement("button");
button2.textContent="最初からやる";
button2.setAttribute("onclick","start();");
div=document.getElementById("div");
while (div.lastChild) div.removeChild(div.lastChild)
div.appendChild(button1);
div.appendChild(button2);
};
};


function check(id){
console.log(document.getElementById(id));
};

start();
</script>
</html>
